define("platformInit",["lodash","coreUtils","experiment","host-worker-init"],function(e,r,t,n){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(r){return e[r]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=1536)}({0:function(r,t){r.exports=e},1:function(e,t){e.exports=r},130:function(e,r){e.exports=n},1536:function(e,r,t){var n,i;n=[t(1537),t(1549),t(512),t(313),t(511),t(130),t(513),t(226)],void 0===(i=function(e,r,t,n,i,o,a,s){"use strict";var p=o.messageProxy;return{getAppApi:e.getApi,initMainR:r,specMapUtils:t,appsUtils:n,messageProxy:p,biUtils:a,widgetsPreLoader:i,registerDeps:i.registerDeps,wixCodeUrlUtils:s}}.apply(r,n))||(e.exports=i)},1537:function(e,r,t){var n,i;n=[t(0),t(511),t(130),t(1546),t(513),t(1548)],void 0===(i=function(e,r,t,n,i,o){"use strict";var a=t.workerMessagesService;function s(r){var t=r.rendererModel.clientSpecMap.toJS?r.rendererModel.clientSpecMap.toJS():r.rendererModel.clientSpecMap;return r.rendererModel.wixCodeModel&&e.some(t,{type:"siteextension"})}return{getApi:function(){var t=!1,p=!1,u=!1,c=void 0,d=a.getAPI();return{init:function(r,t,a,p){if(e.isUndefined(a.applications)&&(a.applications=[]),d.isAppInitiated())console.warn("Wix code is already initiated");else if(a.reportWorkerCreated=function(e){return i.reportBiWithWixBiSession({reportDef:o.WORKER_CREATED,params:{worker_id:e,ts:Date.now()-r.wixBiSession.initialTimestamp}})},a.reportWorkerTerminated=function(e){return i.reportBiWithWixBiSession({reportDef:o.WORKER_TERMINATED,params:{worker_id:e,ts:Date.now()-r.wixBiSession.initialTimestamp}})},a.shouldUseFallbackReportBI=i.shouldUseFallbackReportBI,a.reportBiWithWixBiSession=i.reportBiWithWixBiSession,c=a.applications.length>0,s(r)||c){var u=n.build(r,t,a);a.workerProps=u,a.fetchScripts=p,d.init(a)}},sendMessage:d.sendMessage,registerMessageHandler:d.registerMessageHandler,registerMessageModifier:d.registerMessageModifier,isAppInitiated:d.isAppInitiated,getWorkerById:d.getWorkerById,destroyAppsContainer:d.destroyAppsContainer,preLoadWidgets:function(e,n){!t&&s(e)&&r.asyncGetPreLoadMessage(e,n,function(e){t||(t=!0,d.sendOrHoldMessage(e))})},preLoadUserCode:function(e,t){(!p&&s(e)||c)&&r.asyncGetPreLoadUserCodeMessage(e,t,function(e){p||(p=!0,d.sendOrHoldMessage(e))})},preInitWidgets:function(e,t){!u&&s(e)&&r.asyncGetPreInitMessage(e,t,function(e){u||(u=!0,d.sendOrHoldMessage(e))})}}}}}.apply(r,n))||(e.exports=i)},1538:function(e,r,t){var n,i,o=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var t=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n=[t(0),t(1539)],void 0===(i=function(e,r){"use strict";var t=/{urlTemplate:(.*)}/,n=function(t,n){return e.reduce(r,function(t,i,o){return function(t,n,i){var o=new RegExp("{"+i+":(.*?)}","g");return t.replace(o,function(t,o){var a=r[i](o,n);if(e.isUndefined(a))throw new Error("Data getter '"+i+"' returned no value for data '"+o+"'");return a})}(t,n,o)},t)};return{resolve:function(r,i){var a=t.exec(r)||[],s=o(a,2)[1];return e.isUndefined(s)?r:n(s,i)},validate:function(r){if(!e.isString(r))return!1;var n=t.exec(r)||[],i=o(n,2)[1];return!e.isUndefined(i)||e.startsWith(r,"http")}}}.apply(r,n))||(e.exports=i)},1539:function(e,r,t){var n,i;n=[t(0),t(1540),t(1541),t(1542),t(1544)],void 0===(i=function(e){"use strict";var r=e.drop(arguments,1);return e.assign.apply(e,[{}].concat(function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}(r)))}.apply(r,n))||(e.exports=i)},1540:function(e,r,t){var n,i;n=[t(0)],void 0===(i=function(e){"use strict";return{serviceTopology:function(r,t){var n=t.serviceTopology;return e.get(n,r)}}}.apply(r,n))||(e.exports=i)},1541:function(e,r,t){var n,i;n=[t(0)],void 0===(i=function(e){"use strict";return{clientSpec:function(r,t){var n=t.clientSpec;return e.get(n,r)}}}.apply(r,n))||(e.exports=i)},1542:function(e,r,t){var n,i;n=[t(0),t(226)],void 0===(i=function(e,r){"use strict";return{appStudioBundler:function(e,t){var n=t.clientSpec,i=t.serviceTopology,o=t.currentUrl,a=n.appFields.platform.studio,s=a.wixCodeInstanceId,p=a.wixCodeGridId;return((o?r.parseQueryParams(o):{})["app-studio-bundler-override"]||"https://"+s+".static.pub."+i.wixCloudBaseDomain+"/static/v2")+"/"+p+"/"+s+"/appstudio.viewer.js?module-name=bundle"}}}.apply(r,n))||(e.exports=i)},1543:function(e,r,t){var n;void 0===(n=function(){"use strict";return{getCookie:function(e){if("undefined"!=typeof document)return function(e){for(var r={},t=e.split(/;\s*/),n=0,i=t.length;n<i;n++){var o=t[n].split("=");r[o[0]]=o[1]}return r}(window.document.cookie)[e]}}}.apply(r,[]))||(e.exports=n)},1544:function(e,r,t){var n;void 0===(n=function(){"use strict";return{universalEditorApp:function(e,r){return r.serviceTopology.scriptsLocationMap["universal-editor-app"]+"/editorApp.bundle.min.js"}}}.apply(r,[]))||(e.exports=n)},1545:function(e,r,t){var n,i;n=[t(0)],void 0===(i=function(e){"use strict";var r={APP:"APP",COMPONENT:"COMPONENT"};function t(e,r,t){var n=e.getDataByQuery(r,t);return n&&n.content?JSON.parse(n.content):null}return{getStyleParams:function(e,r,t,n){var i=e.rendererModel.siteInfo.documentType,o=e.getDataByQuery("masterPage").characterSets,a=r.getAllThemeForSDK(e,n,t);return{styleParams:r.getStylesForSDK(a,t,!1,e.serviceTopology,i,o,!0)}},getPublicData:function(e,n,i,o){var a={};return a[r.APP]=t(e,"tpaData-"+n,"masterPage"),a[r.COMPONENT]=t(e,i,o),a},getExternalId:function(r,t){return e.get(t,"referenceId")}}}.apply(r,n))||(e.exports=i)},1546:function(e,r,t){var n,i;n=[t(0),t(226),t(1547),t(1)],void 0===(i=function(e,r,t,n){"use strict";function i(e){return e.publicModel?"site":"preview"}return{build:function(o,a,s){var p,u=o.wixBiSession,c=u.viewerSessionId,d=u.visitorId,l=u.initialTimestamp,f="undefined"===window||window.isPseudoWindow,v="undefined"!=typeof window&&!window.clientSideRender;return{getElementoryArguments:function(e){return r.getElementoryArguments(o,a,e,i(o))},getUserCodeUrlsDetails:r.getUserCodeUrlsDetails,viewMode:i(o),locale:o.rendererModel.locale,userWarmup:o.userWarmup,workerUrl:t.buildUrl(o,s),wixCodePlatformRoot:o.serviceTopology.scriptsLocationMap["wix-code-platform"],santaBase:o.santaBase,baseVersion:o.baseVersion,ownerId:o.rendererModel.userId,postSSR:!f&&v,viewerSessionId:c,visitorId:d,initialTimestamp:l,metaSiteId:o.rendererModel.metaSiteId,openExperiments:(p=o.rendererModel.runningExperiments,e.reduce(p,function(e,r,t){return"new"===r&&e.push(t),e},[])),csrfToken:n.cookieUtils.getCookie("XSRF-TOKEN"),requestId:n.cookieUtils.getCookie("requestId")}}}}.apply(r,n))||(e.exports=i)},1547:function(e,r,t){var n,i;n=[t(0)],void 0===(i=function(e){"use strict";function r(e){return e&&e.replace(/^https?\:/,"")}function t(t,n,i){var o=r(t);if(e.startsWith(o,n)){var a=o.slice(n.length).match(i);return a&&a[1]}}return{buildUrl:function(e,n){var i,o=n.runtimeSource,a=n.hostArtifact,s=void 0===a?"santa":a,p=e.serviceTopology,u="/node_modules/santa-wix-code/dist/wixcode-worker.js";return i=p.scriptsLocationMap[s],/^https?:\/\/localhost(:[0-9]+)?\/?$/.test(i)?u:"/_partials/"+s+"/"+function(e,n,i,o,a){if(e)return e;var s=new RegExp("\\/?services\\/"+a+"\\/([\\w.]+)"),p=r(o);return t(n,p,s)||t(i,p,s)}(o,e.santaBase,p.scriptsLocationMap[s],p.scriptsDomainUrl,s)+u}}}.apply(r,n))||(e.exports=i)},1548:function(e){e.exports={WORKER_CREATED:{endpoint:"platform-viewer",src:79,eventId:101,params:{worker_id:"worker_id",ts:"ts"}},WORKER_TERMINATED:{endpoint:"platform-viewer",src:79,eventId:102,params:{worker_id:"worker_id",ts:"ts"}}}},1549:function(e,r,t){var n,i;n=[t(0),t(313),t(226)],void 0===(i=function(e,r,t){"use strict";return function(n){var i=n.appApi,o=n.siteModel,a=n.isMobileView,s=n.queryUtil,p=n.currentUrl,u=n.isBot,c=n.fetchScripts,d=n.preload,l=void 0===d||d,f=n.hostArtifact,v=void 0===f?"santa":f;p=p||e.get(o,"currentUrl.full",window.document.location.href);var g,m=t.buildScriptsSources(o.serviceTopology,{isDebug:s.getParameterByName("debug")}),y=m.sdkSource,w=m.namespacesSdkSource,S=m.externalComponentsSource,x=m.wixCodeNamespacesAndElementorySupportSource,M=(A=s.getParameterByName("useWixCodeFallback"),"false"!==A&&("true"===A||!window.Worker||u)),I={hostArtifact:v,isMobileView:a,sdkSource:y,namespacesSdkSource:w,externalComponentsSource:S,wixCodeNamespacesAndElementorySupportSource:x,runtimeSource:s.getParameterByName("WixCodeRuntimeSource"),useWixCodeFallback:M},P=s.getParameterByName("viewerPlatformAppSources"),h=s.getParameterByName("viewerPlatformOverrides");var A;if(h)try{h=JSON.parse(h)}catch(e){}I.applications=r.getAppsBaseInfo({rendererModel:o.rendererModel,clientSpecMap:o.rendererModel.clientSpecMap,serviceTopology:o.serviceTopology,viewerPlatformAppSources:P,viewerPlatformOverrides:h,currentUrl:p,santaBase:o.santaBase}),g=o.rendererModel.clientSpecMap,i.init(o,g,I,c),function(r){return l&&(e.some(r,{type:"siteextension"})||I.applications.length)}(g)&&(i.preLoadUserCode(o,p),o.publicModel&&i.preLoadWidgets(o,p))}}.apply(r,n))||(e.exports=i)},226:function(e,r,t){var n,i,o=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var t=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n=[t(0),t(1543)],void 0===(i=function(e,r){"use strict";function t(e){var r=e.appConfig.userScript;return{id:e.id,url:r.url,scriptName:r.scriptName,displayName:r.displayName,routerData:e.routerData}}return{getUserCodeUrlsDetails:function(r,n){var i=[],o=e.find(r,function(e){return e.id===n&&"masterPage"!==e.type}),a=e.find(r,{id:n,type:"masterPage"});return a&&i.push(t(a)),o&&i.push(t(o)),i},getElementoryArguments:function(t,n,i,o){var a,s=function(r){return e(r).map("appConfig").find()}(i);if(s)return{baseUrl:function(r,t){return r.publicModel?e.trimEnd(r.publicModel.externalBaseUrl,"/")+"/_api/wix-code-public-dispatcher/siteview":"//"+e.find(t,{type:"siteextension"}).instanceId+".dev."+r.serviceTopology.wixCloudBaseDomain}(t,n),queryParameters:(a={gridAppId:s.gridAppId,instance:s.instance,viewMode:o},e.reduce(a,function(r,t,n){return e.isUndefined(t)?r:r.concat([n+"="+t])},[]).join("&")),options:{headers:{"X-XSRF-TOKEN":r.getCookie("XSRF-TOKEN")}}}},parseQueryParams:function(e){var r=e.slice(e.indexOf("?")+1).split("&"),t={};return r.forEach(function(e){var r=e.split("="),n=o(r,2),i=n[0],a=n[1];t[i]=decodeURIComponent(a)}),t},buildScriptsSources:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{sdkSource:e.trimEnd(r.scriptsLocationMap["js-wixcode-sdk"],"/")+"/lib/"+(t.isDebug?"wix.js":"wix.min.js"),namespacesSdkSource:e.trimEnd(r.scriptsLocationMap["wixcode-namespaces"],"/")+"/"+(t.isDebug?"wixcode-namespaces.js":"wixcode-namespaces.min.js"),externalComponentsSource:e.trimEnd(r.scriptsLocationMap["wix-ui-santa"],"/")+"/wixcode/"+(t.isDebug?"wixcode-components.js":"wixcode-components.min.js"),wixCodeNamespacesAndElementorySupportSource:e.trimEnd(r.scriptsLocationMap["wix-code-platform"],"/")+"/wixCodeNamespacesAndElementorySupport.min.js"}}}}.apply(r,n))||(e.exports=i)},313:function(e,r,t){var n,i;n=[t(0),t(6),t(512),t(1545)],void 0===(i=function(e,r,t,n){"use strict";var i="1380b703-ce81-ff05-f115-39571d94dfcd",o="675bbcef-18d8-41f5-800e-131ec9e08762";function a(r,t,n){if(r){var i=function(r,t){return e(t).map(function(e){return r.getDynamicPageData(e)}).find()}(r,n);if(i){var o=i.routerData,a=i.routerDefinition;if(o&&a)if("wix-code"===a.appDefinitionId)e.forEach(n,function(r){e.forEach(t,function(e){e.id===r&&(e.routerData=o)})});else{var s=e.find(t,{id:a.appDefinitionId});s&&(s.routerData=o)}}}}function s(r){return e(r).reject({displayName:"siteextension"}).map(function(r){return e.assign({type:p.APPLICATION},r)}).value()}var p={POPUP:"Popup",PAGE:"Page",MASTER_PAGE:"masterPage",APPLICATION:"Application"};function u(r){return!!e.get(r,["wixCodeModel","appData","codeAppId"])}function c(r,t,n){r=e.without(r,"masterPage");var i=s(n);return function(r,t,n,i,o){if(u(i.rendererModel)&&e.find(r,t)){var a=i.isPlatformAppOnPage("masterPage","wixCode");e.forEach(n,function(r){var t=i.isPlatformAppOnPage(r,"wixCode"),n=i.getDataByQuery(r),s=e.get(n,"isPopup");t&&o.push({id:r,type:s?p.POPUP:p.PAGE,displayName:i.getPageTitle(r)}),!s&&a&&o.push({id:r,type:p.MASTER_PAGE})})}}(n,{displayName:"siteextension"},r,t,i),a(t,i,r),i}function d(){for(var e=arguments[0],r=1;r<arguments.length;++r)e=e.replace(/\/$/,"")+"/"+arguments[r].replace(/^\//,"");return e}function l(r,t,n,i){if(u(i)&&e.find(r,{type:"siteextension"})&&!e.find(r,{appDefinitionId:"dataBinding"})){var o=function(e,r,t){var n=d(e.scriptsDomainUrl,"services",r);return t?d(n,t):e.scriptsLocationMap[r]}(t,"dbsm-viewer-app",n.dataBinding);return e.assign({},r,{fakeApplicationId:{appDefinitionId:"dataBinding",appFields:{platform:{viewerScriptUrl:d(o,"/app.js"),viewerVerboseScriptUrl:d(o,"/app.verbose.js")}},type:p.APPLICATION}})}return r}function f(n,a,s,p,c){return e(n).filter(function(r){return r.appDefinitionId===o?u(a):function(r){var n=e.get(r,"appFields.platform.viewerScriptUrl","");return t.validateUrl(n)&&!e.get(r,"permissions.revoked")}(r)}).map(function(n){var o=e.pickBy({id:n.appDefinitionId,displayName:n.type,appInnerId:n.applicationId,instanceId:n.instanceId,instance:n.instance}),u=function(t,n,o,a){var s=o.scriptsLocationMap["fallback-viewer-app"];if(t.versionFailure&&s)return d(s,"fallback-viewer-app.js");var p,u,c=e.get(t,"appFields.platform.viewerScriptUrl"),l=e.get(t,"appFields.platform.experimentalViewerScriptUrl"),f=e.get(t,"appFields.platform.viewerVerboseScriptUrl"),v=t.appDefinitionId;if(n.previewMode&&f)return f;if(a){var g=e.find(a,{appDefinitionId:v});if(g&&(p=g.bundle,u=o.staticServerUrl,0===p.indexOf(u)||0===p.search("https?://localhost")))return g.bundle}return v===i&&r.isOpen("sv_nativeCartIcon",{rendererModel:n})&&l?l:c}(n,a,s,p);u&&(o.url=t.resolveUrl(u,{serviceTopology:s,clientSpec:n,currentUrl:c}));var l=e.get(n,"appFields.platform.baseUrls");return l&&(o.baseUrls=l),o}).value()}function v(r){var t,n=(t=r.viewerPlatformAppSources,e(t||"").split(",").invokeMap("split",/:(.+)/).fromPairs().value()),i=f(l(r.clientSpecMap,r.serviceTopology,n,r.rendererModel),r.rendererModel,r.serviceTopology,r.viewerPlatformOverrides,r.currentUrl);return function(r,t,n){if(e.get(r,"port")&&e.get(r,"path")&&e.get(r,"id")){n=e.endsWith(n,"/")?n.slice(0,-1):n;var i=e.template("<%= santaBase %><%= port %>/<%= path %>"),o=void 0;o=/^(http(s)?:)?\/\//.test(r.path)?r.path:"80"===r.port?i({santaBase:n,port:"",path:r.path}):i({santaBase:n,port:":"+r.port,path:r.path}),t.push({type:p.APPLICATION,id:r.id,url:o,displayName:r.id})}}(n,i,r.santaBase),i}function g(r,t,n){return c(t,n,v({clientSpecMap:r,viewerPlatformAppSources:e.get(n,["currentUrl","query","viewerPlatformAppSources"]),serviceTopology:n.serviceTopology,santaBase:n.santaBase,rendererModel:n.rendererModel}))}function m(r,t,n){return e.includes(["platform.components.AppController","platform.components.AppWidget"],r.componentType)||function(r,t,n){if(!w(r.componentType))return!1;var i=r.dataQuery.replace("#",""),o=t.getDataByQuery(i,n),a=t.getClientSpecMapEntry(o.applicationId);return e.get(a,"appFields.platform.viewerScriptUrl")}(r,t,n)}function y(r,t,n){var i=n.getDataByQuery(r.connectionQuery,t.id,n.dataTypes.CONNECTIONS);return i?e(i.items).filter({type:"ConnectionItem"}).map("controllerId").value():[]}function w(r){return e.startsWith(r,"wysiwyg.viewer.components.tpapps.")||e.startsWith(r,"native.components")}function S(r,t,i){var o=t.getViewMode(),a=t.getClientSpecMap(),s=e.filter(r,"json"),p=function(r,t){return e(r).transform(function(r,t){e.assign(r,e.get(t,"data.connections_data"))},{}).values().flatMap(function(r){var n=t.resolveData(r,null,t.dataTypes.CONNECTIONS);return e.get(n,"items")}).groupBy("controllerId").value()}(e.map(s,"json"),t);return e.flatMap(s,function(r){var s=e.filter(e.get(r,["json","structure",o]),function(e){return m(e,t,r.id)});return e.map(s,function(o){var s=o.dataQuery.replace("#",""),u=e.assign({},t.getDataByQuery(s,r.id)),c=u.applicationId;return w(o.componentType)&&(u.controllerType=function(r,t){var n=t.getClientSpecMapEntry(r.applicationId);return n?r.widgetId||e.findKey(n.widgets,["appPage.hidden",!1]):null}(u,t),u.applicationId=a[c].appDefinitionId,u.settings={externalId:n.getExternalId(t,u),style:n.getStyleParams(t,i,o.styleId,r.id),publicData:n.getPublicData(t,c,u.tpaData,r.id)}),e.omitBy({controllerBehaviors:e.get(t.getDataByQuery(o.behaviorQuery,r.id,t.dataTypes.BEHAVIORS),"items",[]),controllerData:u,controllerId:s,compId:o.id,connections:e.get(p,s),dependencies:y(o,r,t)},e.isUndefined)})})}return{isTypeController:m,hasWixCode:u,getApplications:g,getUserCodeDefinitions:function(r,t,n){return e.reject(g(r,t,n),{type:p.APPLICATION})},getAppsBaseInfo:function(r){var t=v(r);return e.filter(s(t),"url")},getContextInitData:function(r,t,n){var i=S(function(r,t){var n=[{id:r,json:t.getPageData(r)}];if(e.get(t.getDataByQuery(r),"isPopup"))return n;var i=t.MASTER_PAGE_ID;return n.concat({id:i,json:t.getMasterPageData()})}(t,r),r,n);return e.mapValues(function(r){return e(r).groupBy("controllerData.applicationId").mapValues(function(r){return e(r).keyBy("controllerId").mapValues(function(r){return e.pick(r,["controllerData","controllerBehaviors","connections","compId","dependencies"])}).value()}).value()}(i),function(e){return{controllers:e}})}}}.apply(r,n))||(e.exports=i)},511:function(e,r,t){var n,i;n=[t(1),t(313),t(0)],void 0===(i=function(e,r,t){"use strict";var n=null,i=null,o=null,a=null,s=[];function p(e,r,o,p){if(d())return s.push([e,r,o,p]),void requirejs(["utils","host-platform-api","site-widgets","wixCode"],c);var u=p(n),l=n.wixUrlParser.parseUrl(u,e),f=l&&l.pageId;if(f&&!t.includes(t.get(u,"publicModel.siteMembersProtectedPages"),f)){var v=r(i,u,f),g=a.wixCodeWidgetService.getWixCodeSpec(u.getClientSpecMap());o(a.messageBuilder.getExtendedMessage(v,u.rendererModel.wixCodeModel||{},g,u))}}function u(r,t,n){return r.currentUrl=e.urlUtils.parseUrl(t),new n.FullSiteData(r,function(){})}function c(e,r,t,u){d()&&(n=e,i=r,o=t,a=u,s.forEach(function(e){return p.apply(void 0,function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}(e))}),s.length=0)}function d(){return!(n&&i&&o&&a)}return{asyncGetPreLoadMessage:function(e,n,i){p(n,function(t,n,i){var o,a,s,p=r.getApplications(e.rendererModel.clientSpecMap,[i],n),u=e.routers||{configMap:{}},c=t.modelBuilderDataHelper.getApi(n),d=t.globalsBuilder.build(c,!0,i);return t.messageBuilder.loadWidgetsMessage(p,u.configMap,[i],(o={},a=i,s=d.toJson(),a in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,o))},i,t.partial(u,e,n))},asyncGetPreLoadUserCodeMessage:function(e,n,i){p(n,function(t,n,i){var o=r.getUserCodeDefinitions(e.rendererModel.clientSpecMap,[i],n);return t.messageBuilder.loadUserCodesMessage(o,[i])},i,t.partial(u,e,n))},asyncGetPreInitMessage:function(e,t,i){p(t,function(e,t,i){var o={};return o[i]=r.getContextInitData(t,i,n.styleUtils),e.messageBuilder.initWidgetsMessage(o)},i,function(){return e})},registerDeps:c}}.apply(r,n))||(e.exports=i)},512:function(e,r,t){var n,i;n=[t(0),t(1538)],void 0===(i=function(e,r){"use strict";return{getAppSpec:function(r,t){return e.find(r,{appDefinitionId:t})||e.find(r,{type:"siteextension"})},resolveEditorScriptUrl:function(t,n){var i=e.get(t,["appFields","platform"]);if(!e.isUndefined(i)){var o=i.editorScriptUrl;if(!e.isUndefined(o)){var a=r.resolve(o,n);return e.merge({},t,{appFields:{platform:{editorScriptUrl:a}}})}}return t},resolveUrl:r.resolve,validateUrl:r.validate}}.apply(r,n))||(e.exports=i)},513:function(e,r,t){var n,i;n=[t(0)],void 0===(i=function(e){"use strict";return{reportBiWithWixBiSession:function(e){var r=e.reportDef,t=e.params;"undefined"!=typeof window&&(r.errorCode?window.wixBiSession.sendError(r,t.p1,t.p2,t.p3,t.p4):window.wixBiSession.sendBI(r.endpoint,r.eventId,r.src,t))},shouldUseFallbackReportBI:function(r,t){return"WIX_CODE_SITE_API"===r.intent&&"reportBI"===r.type&&e.isEmpty(t)&&"undefined"!=typeof window}}}.apply(r,n))||(e.exports=i)},6:function(e,r){e.exports=t}})});
//# sourceMappingURL=platformInit.min.js.map